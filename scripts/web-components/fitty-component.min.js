!function(){"use strict";var t="object"==typeof global&&global&&global.Object===Object&&global,e="object"==typeof self&&self&&self.Object===Object&&self,n=t||e||Function("return this")(),i=n.Symbol,r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;var l=Object.prototype.toString;var u="[object Null]",c="[object Undefined]",h=i?i.toStringTag:void 0;function d(t){return null==t?void 0===t?c:u:h&&h in Object(t)?function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[s]=n:delete t[s]),r}(t):function(t){return l.call(t)}(t)}var f="[object Symbol]";function p(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var m=NaN,b=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,y=/^0o[0-7]+$/i,w=parseInt;function S(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&d(t)==f}(t))return m;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(b,"");var n=g.test(t);return n||y.test(t)?w(t.slice(2),n?2:8):v.test(t)?m:+t}var _=function(){return n.Date.now()},E="Expected a function",T=Math.max,C=Math.min;function O(t,e,n){var i,r,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(E);function f(e){var n=i,o=r;return i=r=void 0,u=e,a=t.apply(o,n)}function m(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function b(){var t=_();if(m(t))return v(t);s=setTimeout(b,function(t){var n=e-(t-l);return h?C(n,o-(t-u)):n}(t))}function v(t){return s=void 0,d&&i?f(t):(i=r=void 0,a)}function g(){var t=_(),n=m(t);if(i=arguments,r=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(b,e),c?f(t):a}(l);if(h)return clearTimeout(s),s=setTimeout(b,e),f(l)}return void 0===s&&(s=setTimeout(b,e)),a}return e=S(e)||0,p(n)&&(c=!!n.leading,o=(h="maxWait"in n)?T(S(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},g.flush=function(){return void 0===s?a:v(_())},g}var x,z,A=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){if(t){var e=function(t){return[].slice.call(t)},i={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},r=[],o=null,a="requestAnimationFrame"in t?function(){t.cancelAnimationFrame(o),o=t.requestAnimationFrame(function(){l(r.filter(function(t){return t.dirty}))})}:function(){},s=function(t){return function(){r.forEach(function(e){e.dirty=t}),a()}},l=function(t){t.filter(function(t){return!t.styleComputed}).forEach(function(t){t.styleComputed=d(t)}),t.filter(f).forEach(p);var e=t.filter(h);e.forEach(c),e.forEach(function(t){p(t),u(t)}),e.forEach(m)},u=function(t){return t.dirty=i.IDLE},c=function(t){t.availableWidth=t.element.parentNode.clientWidth,t.currentWidth=t.element.scrollWidth,t.previousFontSize=t.currentFontSize,t.currentFontSize=Math.min(Math.max(t.minSize,t.availableWidth/t.currentWidth*t.previousFontSize),t.maxSize),t.whiteSpace=t.multiLine&&t.currentFontSize===t.minSize?"normal":"nowrap"},h=function(t){return t.dirty!==i.DIRTY_LAYOUT||t.dirty===i.DIRTY_LAYOUT&&t.element.parentNode.clientWidth!==t.availableWidth},d=function(e){var n=t.getComputedStyle(e.element,null);e.currentFontSize=parseInt(n.getPropertyValue("font-size"),10),e.display=n.getPropertyValue("display"),e.whiteSpace=n.getPropertyValue("white-space")},f=function(t){var e=!1;return!t.preStyleTestCompleted&&(/inline-/.test(t.display)||(e=!0,t.display="inline-block"),"nowrap"!==t.whiteSpace&&(e=!0,t.whiteSpace="nowrap"),t.preStyleTestCompleted=!0,e)},p=function(t){t.originalStyle||(t.originalStyle=t.element.getAttribute("style")||""),t.element.style.cssText=t.originalStyle+";white-space:"+t.whiteSpace+";display:"+t.display+";font-size:"+t.currentFontSize+"px"},m=function(t){t.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:t.previousFontSize,newValue:t.currentFontSize,scaleFactor:t.currentFontSize/t.previousFontSize}}))},b=function(t,e){return function(){t.dirty=e,a()}},v=function(t){t.newbie=!0,t.dirty=!0,r.push(t)},g=function(t){return function(){r=r.filter(function(e){return e.element!==t.element}),t.observeMutations&&t.observer.disconnect(),t.element.style.cssText=t.originalStyle}},y=function(t){t.observeMutations&&(t.observer=new MutationObserver(b(t,i.DIRTY_CONTENT)),t.observer.observe(t.element,t.observeMutations))},w={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in t&&{subtree:!0,childList:!0,characterData:!0}},S=null,_=function(){t.clearTimeout(S),S=t.setTimeout(s(i.DIRTY_LAYOUT),C.observeWindowDelay)},E=["resize","orientationchange"];return Object.defineProperty(C,"observeWindow",{set:function(e){var n=(e?"add":"remove")+"EventListener";E.forEach(function(e){t[n](e,_)})}}),C.observeWindow=!0,C.observeWindowDelay=100,C.fitAll=s(i.DIRTY),C}function T(t,e){var r=n({},w,e),o=t.map(function(t){var e=n({},r,{element:t});return v(e),y(e),{element:t,fit:b(e,i.DIRTY),unsubscribe:g(e)}});return a(),o}function C(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?T(e(document.querySelectorAll(t)),n):T([t],n)[0]}}("undefined"==typeof window?null:window)}(x={exports:{}},x.exports),x.exports),M=(z=A)&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z;const F=(t=>(class extends t{constructor(...t){super(...t),this.refs=new Proxy({},{get:this.__getFromShadowRoot.bind(this)})}__getFromShadowRoot(t,e){return this.shadowRoot.querySelector('[ref="'+e+'"]')}}))((t=>(class extends t{constructor(...t){super(...t),this.__attributesMap={},this.__waitingOnAttr=(this.constructor.observedAttributes?this.constructor.observedAttributes:[]).filter(t=>(this.attributes.getNamedItem(t)||(this.__attributesMap[t]=this.constructor.defaultAttributeValue(t)),!!this.attributes.getNamedItem(t))),0===this.__waitingOnAttr.length&&this.allAttributesChangedCallback(this.__attributesMap)}static defaultAttributeValue(){}static parseAttributeValue(t,e){return e}attributeChangedCallback(t,e,n,i){if(super.attributeChangedCallback&&super.attributeChangedCallback(t,e,n,i),this.__attributesMap[t]=this.constructor.parseAttributeValue.call(this,t,n),this.__waitingOnAttr.length){const e=this.__waitingOnAttr.indexOf(t);-1!==e&&this.__waitingOnAttr.splice(e,1)}0===this.__waitingOnAttr.length&&this.allAttributesChangedCallback(this.__attributesMap)}allAttributesChangedCallback(){}}))((t=>(class extends t{constructor(...t){super(...t)}static get templateHTML(){return""}static get template(){return this.__templateEl?this.__templateEl:(this.__templateEl=document.createElement("template"),this.__templateEl.innerHTML=this.templateHTML,this.__templateEl)}get templateContent(){return window.ShadyCSS&&window.ShadyCSS.prepareTemplate(this.constructor.template,this.tagName.toLocaleLowerCase()),document.importNode(this.constructor.template.content,!0)}}))((t=>(class extends t{constructor(...t){super(...t)}emitEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}))}}))(HTMLElement))));M.observeWindow=!1;const L=new ResizeObserver(t=>{for(let e of t)e.target.fitEls.forEach(t=>t.fit())});class j extends F{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.templateContent),[...document.querySelectorAll('link[rel="stylesheet"],head>style')].forEach(t=>this.shadowRoot.appendChild(t.cloneNode())),this.onFit=O(this.onFit,5),this.fitEls=[]}connectedCallback(){this.update()}disconnectedCallback(){L.unobserve(this),this.refs.output.innerHTML="",this.fitEls.splice(0).forEach(t=>t.unsubscribe())}static get templateHTML(){return'\n      <style>\n        :host .input {\n          display: none;\n        }\n        :host .output span {\n          white-space:nowrap;\n          display: inline-block;\n        }\n        :host .output {\n          width: 100%;\n          text-align: var(--horizontal-align);\n          transform-origin: var(--horizontal-align) top;\n          height: -webkit-max-content;\n          height: -moz-max-content;\n          height: max-content;\n        }\n        :host .wrapper {\n          max-height:100%;\n          width:100%;\n          position:absolute;\n          align-self: var(--vertical-align);\n        }\n        :host {\n          width: auto;\n          height: auto;\n          min-height: 0;\n          --vertical-align: start;\n          --horizontal-align: center;\n          position: relative;\n          display: flex;\n        }\n      </style>\n      <div ref="wrapper" class="wrapper">\n        <div ref="output" class="output"></div>\n      </div>\n      <div class="input"><slot></slot></div>\n    '}update(){this.disconnectedCallback();const t=[];for(const e of this.childNodes)if(e instanceof HTMLElement)if("BR"===e.tagName){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.refs.output.appendChild(document.createElement("br")),this.fitEls.push(M(e,{minSize:12,maxSize:1024,observeMutations:!1})),e.addEventListener("fit",this.onFit.bind(this))}else t.push(e.cloneNode(!0));else t.push(e.cloneNode());(function(){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.fitEls.push(M(e)),e.addEventListener("fit",this.onFit.bind(this))}).bind(this)(),L.observe(this)}onFit(){const t=this.clientHeight||200,e=this.refs.output.clientHeight;this.refs.output.style.transform="scale(1)",e>t&&(this.refs.output.style.transform="scale("+t/e+")")}}window.addEventListener("DOMContentLoaded",function(){customElements.define("fitty-text",j)})}();
//# sourceMappingURL=bundle.js.map
