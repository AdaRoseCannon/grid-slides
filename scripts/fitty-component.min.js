!function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,n,i=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){if(t){var e=function(t){return[].slice.call(t)},i={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},o=[],r=null,u="requestAnimationFrame"in t?function(){t.cancelAnimationFrame(r),r=t.requestAnimationFrame(function(){s(o.filter(function(t){return t.dirty}))})}:function(){},a=function(t){return function(){o.forEach(function(e){e.dirty=t}),u()}},s=function(t){t.filter(function(t){return!t.styleComputed}).forEach(function(t){t.styleComputed=f(t)}),t.filter(d).forEach(h),t.filter(c).forEach(l),t.forEach(p),t.forEach(v)},l=function(t){t.availableWidth=t.element.parentNode.clientWidth,t.currentWidth=t.element.scrollWidth,t.previousFontSize=t.currentFontSize,t.currentFontSize=Math.min(Math.max(t.minSize,t.availableWidth/t.currentWidth*t.previousFontSize),t.maxSize),t.whiteSpace=t.multiLine&&t.currentFontSize===t.minSize?"normal":"nowrap"},c=function(t){return t.dirty!==i.DIRTY_LAYOUT||t.dirty===i.DIRTY_LAYOUT&&t.element.parentNode.clientWidth!==t.availableWidth},f=function(e){var n=t.getComputedStyle(e.element,null);e.currentFontSize=parseInt(n.getPropertyValue("font-size"),10),e.display=n.getPropertyValue("display"),e.whiteSpace=n.getPropertyValue("white-space")},d=function(t){var e=!1;return/inline-/.test(t.display)||(e=!0,t.display="inline-block"),"nowrap"!==t.whiteSpace&&(e=!0,t.whiteSpace="nowrap"),e},p=function(t){h(t),t.dirty=i.IDLE},h=function(t){t.originalStyle||(t.originalStyle=t.element.getAttribute("style")||""),t.element.style.cssText=t.originalStyle+";white-space:"+t.whiteSpace+";display:"+t.display+";font-size:"+t.currentFontSize+"px"},v=function(t){t.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:t.previousFontSize,newValue:t.currentFontSize,scaleFactor:t.currentFontSize/t.previousFontSize}}))},m=function(t,e){return function(){t.dirty=e,u()}},y=function(t){t.newbie=!0,t.dirty=!0,o.push(t)},b=function(t){return function(){o=o.filter(function(e){return e.element!==t.element}),t.observeMutations&&t.observer.disconnect(),t.element.style.cssText=t.originalStyle}},w=function(t){t.observeMutations&&(t.observer=new MutationObserver(m(t,i.DIRTY_CONTENT)),t.observer.observe(t.element,t.observeMutations))},g={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in t&&{subtree:!0,childList:!0,characterData:!0}},E=null,T=function(){t.clearTimeout(E),E=t.setTimeout(a(i.DIRTY_LAYOUT),F.observeWindowDelay)},S=["resize","orientationchange"];return Object.defineProperty(F,"observeWindow",{set:function(e){var n=(e?"add":"remove")+"EventListener";S.forEach(function(e){t[n](e,T)})}}),F.observeWindow=!0,F.observeWindowDelay=100,F.fitAll=a(i.DIRTY),F}function O(t,e){var o=n({},g,e),r=t.map(function(t){var e=n({},o,{element:t});return y(e),w(e),{element:t,fit:m(e,i.DIRTY),unsubscribe:b(e)}});return u(),r}function F(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?O(e(document.querySelectorAll(t)),n):O([t],n)[0]}}("undefined"==typeof window?null:window)}(e={exports:{}},e.exports),e.exports),o=(n=i)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r="Expected a function",u=NaN,a="[object Symbol]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,d=parseInt,p="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,v=p||h||Function("return this")(),m=Object.prototype.toString,y=Math.max,b=Math.min,w=function(){return v.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&m.call(t)==a}(t))return u;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||f.test(t)?d(t.slice(2),n?2:8):l.test(t)?u:+t}var T=function(t,e,n){var i,o,u,a,s,l,c=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError(r);function h(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function v(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-c>=u}function m(){var t=w();if(v(t))return T(t);s=setTimeout(m,function(t){var n=e-(t-l);return d?b(n,u-(t-c)):n}(t))}function T(t){return s=void 0,p&&i?h(t):(i=o=void 0,a)}function S(){var t=w(),n=v(t);if(i=arguments,o=this,l=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(m,e),f?h(t):a}(l);if(d)return s=setTimeout(m,e),h(l)}return void 0===s&&(s=setTimeout(m,e)),a}return e=E(e)||0,g(n)&&(f=!!n.leading,u=(d="maxWait"in n)?y(E(n.maxWait)||0,e):u,p="trailing"in n?!!n.trailing:p),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=o=s=void 0},S.flush=function(){return void 0===s?a:T(w())},S};class S extends HTMLElementPlus{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.templateContent),this.onFit=T(this.onFit,5),this.fitEls=[]}connectedCallback(){this.update()}disconnectedCallback(){this.refs.output.innerHTML="",this.fitEls.forEach(t=>t.unsubscribe())}static get templateHTML(){return'\n      <style>\n        :host .input {\n          display: none;\n        }\n        :host .output span {\n          white-space:nowrap;\n          display: inline-block;\n        }\n        :host .output {\n          width: 100%;\n          text-align: center;\n          transform-origin: 50% 0;\n        }\n        :host .wrapper {\n          max-height:100%;\n          width:100%;\n          position:absolute;\n          align-self: var(--vertical-align);\n        }\n        :host {\n          width: auto;\n          height: auto;\n          min-height: 0;\n          --vertical-align: start;\n          position: relative;\n          display: flex;\n        }\n      </style>\n      <div ref="wrapper" class="wrapper">\n        <div ref="output" class="output"></div>\n      </div>\n      <div class="input"><slot></slot></div>\n    '}update(){this.refs.output.innerHTML="";const t=[];for(const e of this.childNodes)if(e instanceof HTMLElement)if("BR"===e.tagName){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.refs.output.appendChild(document.createElement("br")),this.fitEls.push(o(e)),e.addEventListener("fit",this.onFit.bind(this))}else t.push(e.cloneNode(!0));else t.push(e.cloneNode());(function(){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.fitEls.push(o(e)),e.addEventListener("fit",this.onFit.bind(this))}).bind(this)()}onFit(){const t=this.clientHeight||200,e=this.refs.output.clientHeight;this.refs.output.style.transform="scale(1)",e>t&&(this.refs.output.style.transform="scale("+t/e+")")}}window.addEventListener("DOMContentLoaded",function(){customElements.define("fitty-text",S)})}();