!function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,n,i=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){if(t){var e=function(t){return[].slice.call(t)},i={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},r=[],o=null,a="requestAnimationFrame"in t?function(){t.cancelAnimationFrame(o),o=t.requestAnimationFrame(function(){l(r.filter(function(t){return t.dirty}))})}:function(){},s=function(t){return function(){r.forEach(function(e){e.dirty=t}),a()}},l=function(t){t.filter(function(t){return!t.styleComputed}).forEach(function(t){t.styleComputed=h(t)}),t.filter(d).forEach(p),t.filter(c).forEach(u),t.forEach(f),t.forEach(m)},u=function(t){t.availableWidth=t.element.parentNode.clientWidth,t.currentWidth=t.element.scrollWidth,t.previousFontSize=t.currentFontSize,t.currentFontSize=Math.min(Math.max(t.minSize,t.availableWidth/t.currentWidth*t.previousFontSize),t.maxSize),t.whiteSpace=t.multiLine&&t.currentFontSize===t.minSize?"normal":"nowrap"},c=function(t){return t.dirty!==i.DIRTY_LAYOUT||t.dirty===i.DIRTY_LAYOUT&&t.element.parentNode.clientWidth!==t.availableWidth},h=function(e){var n=t.getComputedStyle(e.element,null);e.currentFontSize=parseInt(n.getPropertyValue("font-size"),10),e.display=n.getPropertyValue("display"),e.whiteSpace=n.getPropertyValue("white-space")},d=function(t){var e=!1;return/inline-/.test(t.display)||(e=!0,t.display="inline-block"),"nowrap"!==t.whiteSpace&&(e=!0,t.whiteSpace="nowrap"),e},f=function(t){p(t),t.dirty=i.IDLE},p=function(t){t.originalStyle||(t.originalStyle=t.element.getAttribute("style")||""),t.element.style.cssText=t.originalStyle+";white-space:"+t.whiteSpace+";display:"+t.display+";font-size:"+t.currentFontSize+"px"},m=function(t){t.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:t.previousFontSize,newValue:t.currentFontSize,scaleFactor:t.currentFontSize/t.previousFontSize}}))},b=function(t,e){return function(){t.dirty=e,a()}},v=function(t){t.newbie=!0,t.dirty=!0,r.push(t)},y=function(t){return function(){r=r.filter(function(e){return e.element!==t.element}),t.observeMutations&&t.observer.disconnect(),t.element.style.cssText=t.originalStyle}},g=function(t){t.observeMutations&&(t.observer=new MutationObserver(b(t,i.DIRTY_CONTENT)),t.observer.observe(t.element,t.observeMutations))},w={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in t&&{subtree:!0,childList:!0,characterData:!0}},_=null,E=function(){t.clearTimeout(_),_=t.setTimeout(s(i.DIRTY_LAYOUT),T.observeWindowDelay)},S=["resize","orientationchange"];return Object.defineProperty(T,"observeWindow",{set:function(e){var n=(e?"add":"remove")+"EventListener";S.forEach(function(e){t[n](e,E)})}}),T.observeWindow=!0,T.observeWindowDelay=100,T.fitAll=s(i.DIRTY),T}function C(t,e){var r=n({},w,e),o=t.map(function(t){var e=n({},r,{element:t});return v(e),g(e),{element:t,fit:b(e,i.DIRTY),unsubscribe:y(e)}});return a(),o}function T(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?C(e(document.querySelectorAll(t)),n):C([t],n)[0]}}("undefined"==typeof window?null:window)}(e={exports:{}},e.exports),e.exports),r=(n=i)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o="Expected a function",a=NaN,s="[object Symbol]",l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt,f="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,m=f||p||Function("return this")(),b=Object.prototype.toString,v=Math.max,y=Math.min,g=function(){return m.Date.now()};function w(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&b.call(t)==s}(t))return a;if(w(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=w(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=c.test(t);return n||h.test(t)?d(t.slice(2),n?2:8):u.test(t)?a:+t}var E=function(t,e,n){var i,r,a,s,l,u,c=0,h=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError(o);function p(e){var n=i,o=r;return i=r=void 0,c=e,s=t.apply(o,n)}function m(t){var n=t-u;return void 0===u||n>=e||n<0||d&&t-c>=a}function b(){var t=g();if(m(t))return E(t);l=setTimeout(b,function(t){var n=e-(t-u);return d?y(n,a-(t-c)):n}(t))}function E(t){return l=void 0,f&&i?p(t):(i=r=void 0,s)}function S(){var t=g(),n=m(t);if(i=arguments,r=this,u=t,n){if(void 0===l)return function(t){return c=t,l=setTimeout(b,e),h?p(t):s}(u);if(d)return l=setTimeout(b,e),p(u)}return void 0===l&&(l=setTimeout(b,e)),s}return e=_(e)||0,w(n)&&(h=!!n.leading,a=(d="maxWait"in n)?v(_(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),S.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=u=r=l=void 0},S.flush=function(){return void 0===l?s:E(g())},S};const S=(t=>(class extends t{constructor(...t){super(...t),this.refs=new Proxy({},{get:this.__getFromShadowRoot.bind(this)})}__getFromShadowRoot(t,e){return this.shadowRoot.querySelector('[ref="'+e+'"]')}}))((t=>(class extends t{constructor(...t){super(...t),this.__attributesMap={},this.__waitingOnAttr=(this.constructor.observedAttributes?this.constructor.observedAttributes:[]).filter(t=>(this.attributes.getNamedItem(t)||(this.__attributesMap[t]=this.constructor.defaultAttributeValue(t)),!!this.attributes.getNamedItem(t))),0===this.__waitingOnAttr.length&&this.allAttributesChangedCallback(this.__attributesMap)}static defaultAttributeValue(){}static parseAttributeValue(t,e){return e}attributeChangedCallback(t,e,n,i){if(super.attributeChangedCallback&&super.attributeChangedCallback(t,e,n,i),this.__attributesMap[t]=this.constructor.parseAttributeValue.call(this,t,n),this.__waitingOnAttr.length){const e=this.__waitingOnAttr.indexOf(t);-1!==e&&this.__waitingOnAttr.splice(e,1)}0===this.__waitingOnAttr.length&&this.allAttributesChangedCallback(this.__attributesMap)}allAttributesChangedCallback(){}}))((t=>(class extends t{constructor(...t){super(...t)}static get templateHTML(){return""}static get template(){return this.__templateEl?this.__templateEl:(this.__templateEl=document.createElement("template"),this.__templateEl.innerHTML=this.templateHTML,this.__templateEl)}get templateContent(){return window.ShadyCSS&&window.ShadyCSS.prepareTemplate(this.constructor.template,this.tagName.toLocaleLowerCase()),document.importNode(this.constructor.template.content,!0)}}))((t=>(class extends t{constructor(...t){super(...t)}emitEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}))}}))(HTMLElement))));class C extends S{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.templateContent),[...document.querySelectorAll('link[rel="stylesheet"],head>style')].forEach(t=>this.shadowRoot.appendChild(t.cloneNode())),this.onFit=E(this.onFit,5),this.fitEls=[]}connectedCallback(){this.update()}disconnectedCallback(){this.refs.output.innerHTML="",this.fitEls.splice(0).forEach(t=>t.unsubscribe())}static get templateHTML(){return'\n      <style>\n        :host .input {\n          display: none;\n        }\n        :host .output span {\n          white-space:nowrap;\n          display: inline-block;\n        }\n        :host .output {\n          width: 100%;\n          text-align: var(--horizontal-align);\n          transform-origin: var(--horizontal-align) top;\n          height: -webkit-max-content;\n          height: -moz-max-content;\n          height: max-content;\n        }\n        :host .wrapper {\n          max-height:100%;\n          width:100%;\n          position:absolute;\n          align-self: var(--vertical-align);\n        }\n        :host {\n          width: auto;\n          height: auto;\n          min-height: 0;\n          --vertical-align: start;\n          --horizontal-align: center;\n          position: relative;\n          display: flex;\n        }\n      </style>\n      <div ref="wrapper" class="wrapper">\n        <div ref="output" class="output"></div>\n      </div>\n      <div class="input"><slot></slot></div>\n    '}update(){this.disconnectedCallback();const t=[];for(const e of this.childNodes)if(e instanceof HTMLElement)if("BR"===e.tagName){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.refs.output.appendChild(document.createElement("br")),this.fitEls.push(r(e,{minSize:12,maxSize:1024,observeMutations:!1})),e.addEventListener("fit",this.onFit.bind(this))}else t.push(e.cloneNode(!0));else t.push(e.cloneNode());(function(){const e=document.createElement("span");t.splice(0).forEach(t=>e.appendChild(t)),this.refs.output.appendChild(e),this.fitEls.push(r(e)),e.addEventListener("fit",this.onFit.bind(this))}).bind(this)()}onFit(){const t=this.clientHeight||200,e=this.refs.output.clientHeight;this.refs.output.style.transform="scale(1)",e>t&&(this.refs.output.style.transform="scale("+t/e+")")}}window.addEventListener("DOMContentLoaded",function(){customElements.define("fitty-text",C)})}();
//# sourceMappingURL=bundle.js.map
